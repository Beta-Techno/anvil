---
- name: Install nginx
  ansible.builtin.apt:
    name: nginx
    state: "{{ nginx_package_state }}"
    update_cache: true

- name: Enable and start nginx
  ansible.builtin.systemd:
    name: nginx
    enabled: "{{ nginx_enable_service }}"
    state: started

- name: Nginx install summary
  ansible.builtin.debug:
    msg: "nginx installed and {{ 'enabled' if nginx_enable_service else 'disabled' }}. No site configuration applied."
